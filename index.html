<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Market Records AI - Underground AI Music</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #00ffff;
            --secondary: #ff00ff;
            --accent: #ffff00;
            --dark-bg: #0a0a0a;
            --darker-bg: #050505;
            --card-bg: #111111;
            --text: #f0f0f0;
            --text-dim: #888;
            --neon-glow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary);
            --secondary-glow: 0 0 10px var(--secondary), 0 0 20px var(--secondary);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 255, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 0, 255, 0.05) 0%, transparent 20%);
        }

        h1, h2, h3, h4 {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header & Navigation */
        header {
            padding: 20px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background-color: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.1);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            text-transform: uppercase;
            text-decoration: none;
        }

        .logo-icon {
            color: var(--primary);
            text-shadow: var(--neon-glow);
        }

        .logo-text {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            padding: 8px 0;
            position: relative;
        }

        nav a:hover, nav a.active {
            color: var(--primary);
        }

        nav a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        nav a:hover::after {
            width: 100%;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .user-avatar-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark-bg);
            font-size: 1.1rem;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .username {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.7rem;
            color: var(--primary);
        }

        .btn {
            padding: 10px 24px;
            border-radius: 4px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Orbitron', sans-serif;
            border: none;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--dark-bg);
            box-shadow: var(--neon-glow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 20px var(--primary);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-secondary:hover {
            background-color: rgba(0, 255, 255, 0.1);
        }

        .menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary);
        }

        /* Page Content */
        .page {
            display: none;
            min-height: 100vh;
            padding-top: 100px;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Home Page */
        .hero {
            padding: 80px 0 100px;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            max-width: 800px;
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            line-height: 1.2;
            text-transform: uppercase;
        }

        .hero h1 span {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 40px;
            color: var(--text-dim);
            max-width: 600px;
        }

        .hero-btns {
            display: flex;
            gap: 20px;
            margin-bottom: 60px;
        }

        .stats {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-number {
            font-size: 2.5rem;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--primary);
            text-shadow: var(--neon-glow);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hero-visual {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 40%;
            height: 400px;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(40px);
            z-index: 1;
        }

        /* Features Section */
        .section-title {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
        }

        .section-title h2 {
            font-size: 2.5rem;
            text-transform: uppercase;
            display: inline-block;
            padding-bottom: 15px;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }

        .features {
            padding: 100px 0;
            background-color: var(--darker-bg);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: var(--neon-glow);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text);
        }

        .feature-card p {
            color: var(--text-dim);
            margin-bottom: 20px;
        }

        /* AI Generator Page */
        .ai-generator {
            padding: 50px 0 100px;
        }

        .generator-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.1);
        }

        .generator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .generator-header h3 {
            font-size: 1.8rem;
        }

        .generator-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        .control-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }

        .control-group select, .control-group input, .control-group textarea {
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 4px;
            color: var(--text);
            font-family: 'Exo 2', sans-serif;
        }

        .control-group select:focus, .control-group input:focus, .control-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        .generate-btn {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            margin-top: 10px;
        }

        .generator-output {
            margin-top: 40px;
            padding: 30px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            border: 1px dashed rgba(0, 255, 255, 0.3);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .output-placeholder {
            text-align: center;
            color: var(--text-dim);
        }

        .output-placeholder i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .recent-generations {
            margin-top: 80px;
        }

        .track-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .track-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .track-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--neon-glow);
        }

        .track-image {
            height: 150px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            position: relative;
        }

        .track-info {
            padding: 20px;
        }

        .track-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .track-artist {
            color: var(--primary);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .track-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-top: 15px;
        }

        /* Audio Player */
        .audio-player {
            width: 100%;
            margin-top: 15px;
            display: none;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .play-btn {
            background-color: var(--primary);
            color: var(--dark-bg);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .progress-bar {
            flex-grow: 1;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.1s linear;
        }

        .time-display {
            font-size: 0.8rem;
            color: var(--text-dim);
            min-width: 100px;
            text-align: right;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }

        .volume-control input {
            width: 100px;
        }

        /* Marketplace Page */
        .marketplace {
            padding: 50px 0 100px;
        }

        .marketplace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .marketplace-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            background-color: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background-color: var(--primary);
            color: var(--dark-bg);
            border-color: var(--primary);
        }

        .filter-btn:hover {
            border-color: var(--primary);
        }

        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--neon-glow);
        }

        .product-image {
            height: 180px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--secondary);
            color: var(--dark-bg);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .product-description {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 15px;
            height: 60px;
            overflow: hidden;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* Community Page */
        .community {
            padding: 50px 0 100px;
        }

        .community-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .community-stat-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .community-stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            font-family: 'Orbitron', sans-serif;
        }

        .community-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
        }

        .forum-posts {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 30px;
        }

        .forum-post {
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .forum-post:last-child {
            border-bottom: none;
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark-bg);
        }

        .post-info h4 {
            margin-bottom: 5px;
        }

        .post-date {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .post-content p {
            margin-bottom: 10px;
        }

        .post-stats {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .post-stats i {
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .post-stats i:hover {
            color: var(--primary);
        }

        .community-sidebar {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 30px;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-section h4 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .event-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .event-item:last-child {
            border-bottom: none;
        }

        .event-date {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .event-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        /* Dashboard */
        .dashboard {
            padding: 50px 0 100px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        .dashboard-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .dashboard-card h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            border: 1px solid var(--primary);
            box-shadow: var(--neon-glow);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text);
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 4px;
            color: var(--text);
            font-family: 'Exo 2', sans-serif;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        .form-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .form-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .form-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }

        .form-tab:hover {
            color: var(--primary);
        }

        .form-page {
            display: none;
        }

        .form-page.active {
            display: block;
        }

        .form-footer {
            margin-top: 20px;
            text-align: center;
        }

        .form-footer a {
            color: var(--primary);
            text-decoration: none;
        }

        /* Footer */
        footer {
            background-color: var(--darker-bg);
            padding: 60px 0 30px;
            border-top: 1px solid rgba(0, 255, 255, 0.1);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h4 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 12px;
        }

        .footer-column ul li a {
            color: var(--text-dim);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-column ul li a:hover {
            color: var(--primary);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background-color: var(--primary);
            color: var(--dark-bg);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .hero-visual {
                width: 50%;
                opacity: 0.5;
            }
            
            .community-content, .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }
            
            nav {
                position: fixed;
                top: 80px;
                left: 0;
                width: 100%;
                background-color: var(--darker-bg);
                padding: 20px;
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                border-bottom: 1px solid rgba(0, 255, 255, 0.1);
            }
            
            nav.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }
            
            nav ul {
                flex-direction: column;
                gap: 15px;
            }
            
            .hero {
                padding: 40px 0 80px;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero-btns {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .hero-visual {
                display: none;
            }
            
            .generator-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .marketplace-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .auth-buttons .user-info {
                display: none;
            }
        }

        /* Animation */
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: var(--dark-bg);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: var(--neon-glow);
            z-index: 1001;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Loader */
        .loader {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid var(--text-dim);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error Message */
        .error-message {
            color: #ff6b6b;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        /* Profile Dropdown */
        .profile-dropdown {
            position: absolute;
            top: 70px;
            right: 20px;
            background-color: var(--card-bg);
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .profile-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background-color: rgba(0, 255, 255, 0.1);
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo" data-page="home">
                <div class="logo-icon">⟁</div>
                <div class="logo-text">BLACK MARKET RECORDS AI</div>
            </a>
            
            <div class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </div>
            
            <nav id="mainNav">
                <ul>
                    <li><a href="#" class="nav-link active" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="generator">AI Generator</a></li>
                    <li><a href="#" class="nav-link" data-page="marketplace">Marketplace</a></li>
                    <li><a href="#" class="nav-link" data-page="community">Community</a></li>
                    <li><a href="#" class="nav-link" data-page="dashboard">Dashboard</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons">
                <div class="user-profile" id="userProfile" style="display: none;">
                    <div class="user-avatar-small" id="userAvatar">U</div>
                    <div class="user-info">
                        <div class="username" id="usernameDisplay">User</div>
                        <div class="user-role" id="userRole">Producer</div>
                    </div>
                </div>
                <button class="btn btn-secondary" id="loginBtn">Sign In</button>
                <a href="#" class="btn btn-primary" data-page="generator">Get Started</a>
            </div>
        </div>
        
        <!-- Profile Dropdown -->
        <div class="profile-dropdown" id="profileDropdown">
            <div class="dropdown-item" id="viewProfileBtn">
                <i class="fas fa-user"></i> View Profile
            </div>
            <div class="dropdown-item" id="myTracksBtn">
                <i class="fas fa-music"></i> My Tracks
            </div>
            <div class="dropdown-item" id="settingsBtn">
                <i class="fas fa-cog"></i> Settings
            </div>
            <div class="dropdown-item" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Sign Out
            </div>
        </div>
    </header>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <button class="modal-close" id="closeAuthModal">&times;</button>
            
            <div class="form-tabs">
                <div class="form-tab active" data-form="login">Sign In</div>
                <div class="form-tab" data-form="register">Sign Up</div>
            </div>
            
            <!-- Login Form -->
            <div class="form-page active" id="loginForm">
                <h3>Sign In to Black Market AI</h3>
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                    <div class="error-message" id="loginEmailError"></div>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                    <div class="error-message" id="loginPasswordError"></div>
                </div>
                <button class="btn btn-primary" id="submitLogin" style="width: 100%;">Sign In</button>
                <div class="form-footer">
                    <p>Don't have an account? <a href="#" id="switchToRegister">Sign up here</a></p>
                </div>
            </div>
            
            <!-- Register Form -->
            <div class="form-page" id="registerForm">
                <h3>Join Black Market AI</h3>
                <div class="form-group">
                    <label for="registerUsername">Username</label>
                    <input type="text" id="registerUsername" placeholder="Choose a username">
                    <div class="error-message" id="registerUsernameError"></div>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" placeholder="Enter your email">
                    <div class="error-message" id="registerEmailError"></div>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password (min. 8 chars)">
                    <div class="error-message" id="registerPasswordError"></div>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" placeholder="Confirm your password">
                    <div class="error-message" id="registerConfirmPasswordError"></div>
                </div>
                <div class="form-group">
                    <label for="producerType">Producer Type</label>
                    <select id="producerType" class="control-group select" style="width: 100%; padding: 12px 15px;">
                        <option value="hobbyist">Hobbyist Producer</option>
                        <option value="professional">Professional Producer</option>
                        <option value="sound_designer">Sound Designer</option>
                        <option value="experimental">Experimental Artist</option>
                        <option value="ai_researcher">AI Music Researcher</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="submitRegister" style="width: 100%;">Create Account</button>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" id="switchToLogin">Sign in here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page" class="page active">
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Generate <span>Underground Sounds</span> with AI</h1>
                    <p>Black Market Records AI merges cutting-edge artificial intelligence with underground music culture. Create unique tracks, samples, and beats that push the boundaries of sound.</p>
                    
                    <div class="hero-btns">
                        <a href="#" class="btn btn-primary" data-page="generator">Start Creating</a>
                        <a href="#" class="btn btn-secondary" data-page="marketplace">Explore Marketplace</a>
                    </div>
                    
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-number" id="totalTracks">50K+</div>
                            <div class="stat-label">Tracks Generated</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="activeProducers">10K+</div>
                            <div class="stat-label">Active Producers</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="aiModels">200+</div>
                            <div class="stat-label">AI Models</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">AI Training</div>
                        </div>
                    </div>
                </div>
                
                <div class="hero-visual"></div>
            </div>
        </section>

        <section class="features">
            <div class="container">
                <div class="section-title">
                    <h2>Powerful Features</h2>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3>AI Sound Generation</h3>
                        <p>Generate complete tracks, stems, or samples using our proprietary AI models trained on underground music.</p>
                        <a href="#" class="nav-link" data-page="generator" style="color: var(--primary); text-decoration: none; font-weight: 600;">Explore →</a>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-compact-disc"></i>
                        </div>
                        <h3>Style Transfer</h3>
                        <p>Apply the characteristics of any music genre or artist to your own tracks with our style transfer technology.</p>
                        <a href="#" class="nav-link" data-page="generator" style="color: var(--primary); text-decoration: none; font-weight: 600;">Try It →</a>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-store"></i>
                        </div>
                        <h3>Digital Marketplace</h3>
                        <p>Sell your AI-generated tracks or exclusive samples in our secure, decentralized marketplace.</p>
                        <a href="#" class="nav-link" data-page="marketplace" style="color: var(--primary); text-decoration: none; font-weight: 600;">Visit Market →</a>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Collaborative AI</h3>
                        <p>Work with other producers and our AI to create unique collaborative tracks in real-time.</p>
                        <a href="#" class="nav-link" data-page="community" style="color: var(--primary); text-decoration: none; font-weight: 600;">Join Session →</a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- AI Generator Page -->
    <div id="generator-page" class="page">
        <section class="ai-generator">
            <div class="container">
                <div class="section-title">
                    <h2>AI Track Generator</h2>
                    <p style="margin-top: 20px; color: var(--text-dim);">Create unique underground tracks with our advanced AI models</p>
                </div>
                
                <div class="generator-container">
                    <div class="generator-header">
                        <h3>Create Your Underground Track</h3>
                        <div class="btn btn-secondary" id="loadPresetBtn">Load Preset</div>
                    </div>
                    
                    <div class="generator-controls">
                        <div class="control-group">
                            <label for="genre">Genre</label>
                            <select id="genre">
                                <option value="techno">Dark Techno</option>
                                <option value="dubstep">Experimental Dubstep</option>
                                <option value="dnb">Neurofunk DnB</option>
                                <option value="wave">Wave & Trap</option>
                                <option value="experimental">Experimental Bass</option>
                                <option value="industrial">Industrial</option>
                                <option value="glitch">Glitch Hop</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label for="mood">Mood & Atmosphere</label>
                            <select id="mood">
                                <option value="dark">Dark & Brooding</option>
                                <option value="energetic">High Energy</option>
                                <option value="atmospheric">Atmospheric</option>
                                <option value="chaotic">Chaotic & Unpredictable</option>
                                <option value="melancholic">Melancholic</option>
                                <option value="hypnotic">Hypnotic</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label for="length">Track Length</label>
                            <input type="range" id="length" min="60" max="480" value="180">
                            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                                <span>1:00</span>
                                <span id="lengthValue">3:00</span>
                                <span>8:00</span>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label for="complexity">Complexity</label>
                            <input type="range" id="complexity" min="1" max="10" value="7">
                            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                                <span>Simple</span>
                                <span id="complexityValue">7/10</span>
                                <span>Complex</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label for="trackTitle">Track Title (Optional)</label>
                            <input type="text" id="trackTitle" placeholder="e.g., Neural Fracture">
                        </div>

                        <div class="control-group">
                            <label for="inspiration">Inspiration Notes</label>
                            <textarea id="inspiration" rows="3" placeholder="Describe the sound you're looking for..."></textarea>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary generate-btn pulse" id="generateTrackBtn">
                        <i class="fas fa-bolt"></i> Generate Track
                    </button>
                    
                    <div class="generator-output">
                        <div class="output-placeholder" id="outputPlaceholder">
                            <i class="fas fa-music"></i>
                            <h4>Your AI-generated track will appear here</h4>
                            <p>Adjust parameters and click "Generate Track" to create</p>
                        </div>
                        <div id="trackOutput" style="display: none; width: 100%;">
                            <!-- Generated track will be displayed here -->
                        </div>
                    </div>
                </div>
                
                <div class="recent-generations">
                    <div class="section-title">
                        <h3>Recently Generated Tracks</h3>
                        <p style="margin-top: 10px; color: var(--text-dim);">Check out what others are creating</p>
                    </div>
                    
                    <div class="track-grid" id="recentTracksGrid">
                        <!-- Recent tracks will be loaded here -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Marketplace Page -->
    <div id="marketplace-page" class="page">
        <section class="marketplace">
            <div class="container">
                <div class="marketplace-header">
                    <div>
                        <h1>AI Music Marketplace</h1>
                        <p style="color: var(--text-dim); margin-top: 10px;">Buy and sell unique AI-generated tracks, samples, and models</p>
                    </div>
                    <a href="#" class="btn btn-primary" data-page="generator" id="createAndSellBtn">Create & Sell</a>
                </div>
                
                <div class="marketplace-filters">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="tracks">Tracks</button>
                    <button class="filter-btn" data-filter="samples">Samples</button>
                    <button class="filter-btn" data-filter="loops">Loops</button>
                    <button class="filter-btn" data-filter="presets">Presets</button>
                    <button class="filter-btn" data-filter="models">AI Models</button>
                </div>
                
                <div class="marketplace-grid" id="marketplaceGrid">
                    <!-- Marketplace items will be loaded here -->
                </div>
            </div>
        </section>
    </div>

    <!-- Community Page -->
    <div id="community-page" class="page">
        <section class="community">
            <div class="container">
                <div class="section-title">
                    <h2>Underground Community</h2>
                    <p style="margin-top: 20px; color: var(--text-dim);">Connect with producers, share tracks, and collaborate</p>
                </div>
                
                <div class="community-stats">
                    <div class="community-stat-card">
                        <div class="community-stat-number" id="communityMembers">12,847</div>
                        <div>Active Members</div>
                    </div>
                    <div class="community-stat-card">
                        <div class="community-stat-number" id="collabProjects">3,241</div>
                        <div>Collaborative Projects</div>
                    </div>
                    <div class="community-stat-card">
                        <div class="community-stat-number" id="liveSessions">892</div>
                        <div>Live Sessions This Month</div>
                    </div>
                    <div class="community-stat-card">
                        <div class="community-stat-number" id="trainingGroups">48</div>
                        <div>AI Training Groups</div>
                    </div>
                </div>
                
                <div class="community-content">
                    <div class="forum-posts">
                        <h3 style="margin-bottom: 30px;">Recent Forum Activity</h3>
                        <div id="forumPostsContainer">
                            <!-- Forum posts will be loaded here -->
                        </div>
                        <div class="form-group" style="margin-top: 30px;">
                            <textarea id="newPostContent" rows="3" placeholder="Write a new post..."></textarea>
                            <button class="btn btn-primary" id="submitPostBtn" style="margin-top: 10px;">Post to Community</button>
                        </div>
                    </div>
                    
                    <div class="community-sidebar">
                        <div class="sidebar-section">
                            <h4>Upcoming Events</h4>
                            <div id="upcomingEvents">
                                <!-- Events will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="sidebar-section">
                            <h4>Top Producers</h4>
                            <div id="topProducers">
                                <!-- Top producers will be loaded here -->
                            </div>
                        </div>
                        
                        <a href="#" class="btn btn-primary" style="width: 100%; margin-top: 20px;" data-page="generator">Join Community</a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page">
        <section class="dashboard">
            <div class="container">
                <div class="section-title">
                    <h2>Your AI Studio Dashboard</h2>
                    <p style="margin-top: 20px; color: var(--text-dim);">Manage your tracks, earnings, and AI models</p>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Your Generated Tracks</h3>
                        <div id="userTracksList">
                            <!-- User's tracks will appear here -->
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3>Stats & Analytics</h3>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                <span>Tracks Generated:</span>
                                <span id="userTracksCount">0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                <span>Tracks Sold:</span>
                                <span id="userTracksSold">0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                <span>Total Earnings:</span>
                                <span id="userEarnings">0 ETH</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                <span>Community Likes:</span>
                                <span id="userLikes">0</span>
                            </div>
                        </div>
                        <canvas id="userChart" width="400" height="200" style="margin-top: 20px;"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>Black Market Records AI</h4>
                    <p>The frontier of AI-generated underground music. Pushing sonic boundaries since 2023.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-discord"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h4>Platform</h4>
                    <ul>
                        <li><a href="#" class="nav-link" data-page="generator">AI Generator</a></li>
                        <li><a href="#" class="nav-link" data-page="marketplace">Marketplace</a></li>
                        <li><a href="#" class="nav-link" data-page="community">Community</a></li>
                        <li><a href="#" class="nav-link" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#">Documentation</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="#" class="nav-link" data-page="community">Forums</a></li>
                        <li><a href="#" class="nav-link" data-page="community">Challenges</a></li>
                        <li><a href="#">Radio</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#" class="nav-link" data-page="community">Events</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Copyright</a></li>
                        <li><a href="#">AI Ethics</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Black Market Records AI. All rights reserved. | This is a functional demo with simulated AI music generation.</p>
            </div>
        </div>
    </footer>

    <script>
        // Main Application State
        const appState = {
            currentUser: null,
            isLoggedIn: false,
            userTracks: [],
            marketplaceItems: [],
            forumPosts: [],
            communityStats: {
                members: 12847,
                projects: 3241,
                sessions: 892,
                groups: 48
            },
            totalTracksGenerated: 50123,
            activeProducers: 10234,
            aiModels: 213
        };

        // Audio Library - Multiple tracks for each genre
        const audioLibrary = {
            techno: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3", title: "Pulse Transmission", mood: "energetic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-tech-229.mp3", title: "Neon Grid", mood: "dark" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3", title: "Underground Circuit", mood: "hypnotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Dark Matter", mood: "atmospheric" }
            ],
            dubstep: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3", title: "Bass Mutation", mood: "chaotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3", title: "Fractured Signal", mood: "energetic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-tech-229.mp3", title: "Wobble Theory", mood: "dark" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Subharmonic", mood: "melancholic" }
            ],
            dnb: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-ambition-32.mp3", title: "Neuro Impulse", mood: "energetic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3", title: "Fractal Break", mood: "chaotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3", title: "Liquid Intelligence", mood: "atmospheric" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Jungle Code", mood: "dark" }
            ],
            wave: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-hazy-after-hours-132.mp3", title: "Vapor Drift", mood: "atmospheric" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Ethereal Wave", mood: "melancholic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3", title: "Digital Ocean", mood: "hypnotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-ambition-32.mp3", title: "Trap Nexus", mood: "energetic" }
            ],
            experimental: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Glitch Artifact", mood: "chaotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-hazy-after-hours-132.mp3", title: "Data Ghost", mood: "atmospheric" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3", title: "Quantum Noise", mood: "hypnotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-tech-229.mp3", title: "Algorithmic Chaos", mood: "dark" }
            ],
            industrial: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-tech-229.mp3", title: "Machine Rhythm", mood: "dark" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3", title: "Factory Echo", mood: "energetic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Metallic Resonance", mood: "chaotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3", title: "Steel Pulse", mood: "hypnotic" }
            ],
            glitch: [
                { url: "https://assets.mixkit.co/music/preview/mixkit-mysterious-space-1235.mp3", title: "Bit Error", mood: "chaotic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-hazy-after-hours-132.mp3", title: "Digital Fracture", mood: "atmospheric" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-driving-ambition-32.mp3", title: "Hop Skip", mood: "energetic" },
                { url: "https://assets.mixkit.co/music/preview/mixkit-deep-urban-623.mp3", title: "Buffer Overflow", mood: "dark" }
            ]
        };

        // Sample Data
        const sampleTracks = [
            { id: 1, title: "Neural Fracture", artist: "void_operator", genre: "techno", mood: "dark", length: 204, complexity: 8, plays: 2400, likes: 128, icon: "fa-headphones", audioUrl: audioLibrary.techno[0].url },
            { id: 2, title: "Circuit Breaker", artist: "neural_drip", genre: "dubstep", mood: "energetic", length: 252, complexity: 9, plays: 1800, likes: 94, icon: "fa-wave-square", audioUrl: audioLibrary.dubstep[1].url },
            { id: 3, title: "Data Ghost", artist: "cypher_9", genre: "dnb", mood: "chaotic", length: 168, complexity: 7, plays: 3100, likes: 156, icon: "fa-satellite-dish", audioUrl: audioLibrary.dnb[2].url },
            { id: 4, title: "Binary Rain", artist: "synth_cascade", genre: "wave", mood: "atmospheric", length: 302, complexity: 6, plays: 1200, likes: 67, icon: "fa-microchip", audioUrl: audioLibrary.wave[0].url },
            { id: 5, title: "Algorithmic Chaos", artist: "glitch_witch", genre: "experimental", mood: "chaotic", length: 186, complexity: 10, plays: 890, likes: 45, icon: "fa-atom", audioUrl: audioLibrary.experimental[3].url },
            { id: 6, title: "Steel Pulse", artist: "factory_noise", genre: "industrial", mood: "dark", length: 278, complexity: 8, plays: 1450, likes: 82, icon: "fa-industry", audioUrl: audioLibrary.industrial[3].url }
        ];

        const marketplaceItems = [
            { id: 1, title: "Neuro Bass Pack Vol. 1", description: "50 unique neurofunk bass samples generated with our latest AI model.", price: 29.99, type: "samples", badge: "Top Seller", icon: "fa-compact-disc" },
            { id: 2, title: "Dark Techno AI Model", description: "Custom AI model trained on underground techno for unique track generation.", price: 149.99, type: "models", badge: null, icon: "fa-sliders-h" },
            { id: 3, title: "Void Transmission Full Track", description: "Complete experimental dubstep track generated by @neural_drip.", price: 45.50, type: "tracks", badge: "New", icon: "fa-music" },
            { id: 4, title: "Glitch Percussion Kit", description: "200+ glitch and IDM percussion samples for experimental production.", price: 19.99, type: "samples", badge: null, icon: "fa-drum" },
            { id: 5, title: "Atmospheric Pad Collection", description: "75 evolving atmospheric pads for cinematic and ambient productions.", price: 24.99, type: "presets", badge: null, icon: "fa-wave-square" },
            { id: 6, title: "Style Transfer AI", description: "Apply any artist's style to your tracks with this specialized AI.", price: 99.99, type: "models", badge: null, icon: "fa-robot" }
        ];

        const forumPosts = [
            { id: 1, user: "glitch_witch", avatarText: "GW", title: "How to train custom AI models for breakcore?", content: "I've been experimenting with training my own models on classic breakcore samples. Anyone have tips on dataset preparation for more chaotic results?", date: "2 hours ago", comments: 24, likes: 42, userLiked: false },
            { id: 2, user: "synth_override", avatarText: "SO", title: "Collaborative AI jam session this Friday", content: "Hosting a live collaborative session where we'll use the NeuralNetwork model to generate tracks in real-time. All skill levels welcome!", date: "5 hours ago", comments: 18, likes: 37, userLiked: false },
            { id: 3, user: "circuit_bender", avatarText: "CB", title: "My track just got picked up by a label!", content: "Sharing some exciting news - my AI-generated track 'Data Fracture' was just signed to Darknet Records! The track was created using the Neurofunk model with custom parameters.", date: "1 day ago", comments: 56, likes: 128, userLiked: false }
        ];

        const topProducers = [
            { name: "@neural_drip", sales: 42, avatarText: "ND" },
            { name: "@void_operator", sales: 38, avatarText: "VO" },
            { name: "@synth_cascade", sales: 31, avatarText: "SC" },
            { name: "@circuit_bender", sales: 28, avatarText: "CB" },
            { name: "@glitch_witch", sales: 25, avatarText: "GW" }
        ];

        const upcomingEvents = [
            { date: "April 15", title: "AI & Bass Workshop", description: "Live session on bass sound design with AI" },
            { date: "April 18", title: "Marketplace NFT Drop", description: "Exclusive AI-generated track NFTs" },
            { date: "April 22", title: "Community Challenge: Glitch Hop", description: "Create the best glitch hop track with AI" }
        ];

        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-link');
        const menuToggle = document.getElementById('menuToggle');
        const mainNav = document.getElementById('mainNav');
        const loginBtn = document.getElementById('loginBtn');
        const userProfile = document.getElementById('userProfile');
        const userAvatar = document.getElementById('userAvatar');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const userRole = document.getElementById('userRole');
        const profileDropdown = document.getElementById('profileDropdown');
        const authModal = document.getElementById('authModal');
        const closeAuthModal = document.getElementById('closeAuthModal');
        const notification = document.getElementById('notification');
        const generateTrackBtn = document.getElementById('generateTrackBtn');
        const loadPresetBtn = document.getElementById('loadPresetBtn');
        const createAndSellBtn = document.getElementById('createAndSellBtn');
        const submitPostBtn = document.getElementById('submitPostBtn');
        const recentTracksGrid = document.getElementById('recentTracksGrid');
        const marketplaceGrid = document.getElementById('marketplaceGrid');
        const forumPostsContainer = document.getElementById('forumPostsContainer');
        const upcomingEventsContainer = document.getElementById('upcomingEvents');
        const topProducersContainer = document.getElementById('topProducers');
        const userTracksList = document.getElementById('userTracksList');
        const userTracksCount = document.getElementById('userTracksCount');
        const userTracksSold = document.getElementById('userTracksSold');
        const userEarnings = document.getElementById('userEarnings');
        const userLikes = document.getElementById('userLikes');
        const totalTracksEl = document.getElementById('totalTracks');
        const activeProducersEl = document.getElementById('activeProducers');
        const aiModelsEl = document.getElementById('aiModels');
        const communityMembersEl = document.getElementById('communityMembers');
        const collabProjectsEl = document.getElementById('collabProjects');
        const liveSessionsEl = document.getElementById('liveSessions');
        const trainingGroupsEl = document.getElementById('trainingGroups');

        // Form elements
        const formTabs = document.querySelectorAll('.form-tab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const switchToRegister = document.getElementById('switchToRegister');
        const switchToLogin = document.getElementById('switchToLogin');
        const submitLogin = document.getElementById('submitLogin');
        const submitRegister = document.getElementById('submitRegister');

        // Audio Player Management
        let currentAudio = null;
        let currentProgressInterval = null;
        let currentVolume = 0.7;

        // Utility Functions
        function showNotification(message, duration = 3000) {
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Page Navigation
        function switchPage(pageId) {
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            const targetPage = document.getElementById(`${pageId}-page`);
            if (targetPage) {
                targetPage.classList.add('active');
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-page') === pageId) {
                        link.classList.add('active');
                    }
                });
                
                window.scrollTo(0, 0);
                mainNav.classList.remove('active');
                
                // Initialize page-specific content
                if (pageId === 'generator') {
                    loadRecentTracks();
                } else if (pageId === 'marketplace') {
                    loadMarketplaceItems();
                } else if (pageId === 'community') {
                    loadCommunityContent();
                } else if (pageId === 'dashboard') {
                    loadDashboard();
                }
            }
        }

        // User Authentication Functions
        function showLoginForm() {
            formTabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector('.form-tab[data-form="login"]').classList.add('active');
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
        }

        function showRegisterForm() {
            formTabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector('.form-tab[data-form="register"]').classList.add('active');
            registerForm.classList.add('active');
            loginForm.classList.remove('active');
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            return false;
        }

        function hideError(elementId) {
            const errorElement = document.getElementById(elementId);
            errorElement.style.display = 'none';
            return true;
        }

        function loginUser(email, password) {
            // Check if user exists in localStorage
            const users = JSON.parse(localStorage.getItem('bmr_users')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                appState.currentUser = user;
                appState.isLoggedIn = true;
                
                // Update UI
                updateUserUI();
                authModal.style.display = 'none';
                showNotification(`Welcome back, ${user.username}!`, 3000);
                
                // Load user tracks from localStorage
                const userTracks = JSON.parse(localStorage.getItem(`bmr_tracks_${user.id}`)) || [];
                appState.userTracks = userTracks;
                
                // Update dashboard if visible
                if (document.getElementById('dashboard-page').classList.contains('active')) {
                    loadDashboard();
                }
                
                return true;
            } else {
                showError('loginPasswordError', 'Invalid email or password');
                return false;
            }
        }

        function registerUser(username, email, password, producerType) {
            // Check if user already exists
            const users = JSON.parse(localStorage.getItem('bmr_users')) || [];
            if (users.find(u => u.email === email)) {
                showError('registerEmailError', 'Email already registered');
                return false;
            }
            
            if (users.find(u => u.username === username)) {
                showError('registerUsernameError', 'Username already taken');
                return false;
            }
            
            // Create new user
            const newUser = {
                id: Date.now(),
                username: username,
                email: email,
                password: password,
                producerType: producerType,
                avatarText: username.substring(0, 2).toUpperCase(),
                joinedDate: new Date().toISOString(),
                tracksGenerated: 0,
                tracksSold: 0,
                earnings: 0,
                likes: 0
            };
            
            users.push(newUser);
            localStorage.setItem('bmr_users', JSON.stringify(users));
            
            // Set as current user
            appState.currentUser = newUser;
            appState.isLoggedIn = true;
            
            // Update UI
            updateUserUI();
            authModal.style.display = 'none';
            showNotification(`Welcome to Black Market AI, ${username}!`, 3000);
            
            // Switch to generator page
            switchPage('generator');
            
            return true;
        }

        function logoutUser() {
            appState.currentUser = null;
            appState.isLoggedIn = false;
            appState.userTracks = [];
            
            // Update UI
            userProfile.style.display = 'none';
            loginBtn.style.display = 'block';
            profileDropdown.classList.remove('show');
            
            showNotification('Signed out successfully', 2000);
            
            // If on dashboard, reload to show empty state
            if (document.getElementById('dashboard-page').classList.contains('active')) {
                loadDashboard();
            }
        }

        function updateUserUI() {
            if (appState.isLoggedIn && appState.currentUser) {
                userAvatar.textContent = appState.currentUser.avatarText;
                usernameDisplay.textContent = appState.currentUser.username;
                userRole.textContent = appState.currentUser.producerType.replace('_', ' ');
                userProfile.style.display = 'flex';
                loginBtn.style.display = 'none';
            } else {
                userProfile.style.display = 'none';
                loginBtn.style.display = 'block';
            }
        }

        // Initialize Recent Tracks
        function loadRecentTracks() {
            recentTracksGrid.innerHTML = '';
            
            sampleTracks.forEach(track => {
                const trackCard = createTrackCard(track);
                recentTracksGrid.appendChild(trackCard);
            });
        }

        // Create Track Card Element
        function createTrackCard(track) {
            const card = document.createElement('div');
            card.className = 'track-card';
            card.innerHTML = `
                <div class="track-image">
                    <i class="fas ${track.icon}"></i>
                    <div class="audio-player" id="audio-player-${track.id}">
                        <div class="audio-controls">
                            <button class="play-btn" data-track-id="${track.id}">
                                <i class="fas fa-play"></i>
                            </button>
                            <div class="progress-bar">
                                <div class="progress" id="progress-${track.id}"></div>
                            </div>
                            <div class="time-display" id="time-${track.id}">0:00 / ${formatTime(track.length)}</div>
                        </div>
                        <div class="volume-control">
                            <i class="fas fa-volume-down"></i>
                            <input type="range" min="0" max="100" value="70" class="volume-slider" data-track-id="${track.id}">
                        </div>
                    </div>
                </div>
                <div class="track-info">
                    <div class="track-title">${track.title}</div>
                    <div class="track-artist">@${track.artist}</div>
                    <div class="track-stats">
                        <span><i class="fas fa-play"></i> ${track.plays.toLocaleString()}</span>
                        <span><i class="fas fa-heart"></i> ${track.likes}</span>
                        <span>${formatTime(track.length)}</span>
                    </div>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 10px; padding: 8px;" data-track-id="${track.id}" data-action="like">
                        <i class="fas fa-heart"></i> Like Track
                    </button>
                </div>
            `;
            
            // Add event listener for play button
            const playBtn = card.querySelector('.play-btn');
            playBtn.addEventListener('click', function() {
                const trackId = this.getAttribute('data-track-id');
                playTrack(trackId, track);
            });
            
            // Add event listener for volume slider
            const volumeSlider = card.querySelector('.volume-slider');
            volumeSlider.addEventListener('input', function() {
                const trackId = this.getAttribute('data-track-id');
                const volume = this.value / 100;
                setTrackVolume(trackId, volume);
            });
            
            // Add event listener for like button
            const likeBtn = card.querySelector('[data-action="like"]');
            likeBtn.addEventListener('click', function() {
                const trackId = this.getAttribute('data-track-id');
                likeTrack(trackId, track);
                this.innerHTML = '<i class="fas fa-heart"></i> Liked!';
                this.disabled = true;
            });
            
            return card;
        }

        // Audio Playback Functionality
        function playTrack(trackId, track) {
            // Stop current audio if playing
            if (currentAudio) {
                currentAudio.pause();
                if (currentProgressInterval) {
                    clearInterval(currentProgressInterval);
                }
                
                // Reset previous player UI
                const previousPlayBtn = document.querySelector(`.play-btn[data-track-id="${currentAudio.dataset.trackId}"]`);
                if (previousPlayBtn) {
                    previousPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                    const previousAudioPlayer = document.getElementById(`audio-player-${currentAudio.dataset.trackId}`);
                    if (previousAudioPlayer) {
                        previousAudioPlayer.style.display = 'none';
                    }
                }
            }
            
            // Create or get audio element
            let audio = document.getElementById(`audio-${trackId}`);
            if (!audio) {
                audio = new Audio(track.audioUrl);
                audio.id = `audio-${trackId}`;
                audio.dataset.trackId = trackId;
                audio.volume = currentVolume;
                document.body.appendChild(audio);
                
                // Update time display as audio plays
                audio.addEventListener('timeupdate', function() {
                    const progress = (audio.currentTime / audio.duration) * 100;
                    const progressBar = document.getElementById(`progress-${trackId}`);
                    const timeDisplay = document.getElementById(`time-${trackId}`);
                    
                    if (progressBar) {
                        progressBar.style.width = `${progress}%`;
                    }
                    
                    if (timeDisplay) {
                        timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(track.length)}`;
                    }
                });
                
                // When audio ends
                audio.addEventListener('ended', function() {
                    const playBtn = document.querySelector(`.play-btn[data-track-id="${trackId}"]`);
                    if (playBtn) {
                        playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    }
                    
                    const progressBar = document.getElementById(`progress-${trackId}`);
                    if (progressBar) {
                        progressBar.style.width = '0%';
                    }
                    
                    const timeDisplay = document.getElementById(`time-${trackId}`);
                    if (timeDisplay) {
                        timeDisplay.textContent = `0:00 / ${formatTime(track.length)}`;
                    }
                    
                    clearInterval(currentProgressInterval);
                });
            }
            
            // Toggle play/pause
            const playBtn = document.querySelector(`.play-btn[data-track-id="${trackId}"]`);
            const audioPlayer = document.getElementById(`audio-player-${trackId}`);
            
            if (audio.paused) {
                audio.play();
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                audioPlayer.style.display = 'block';
                
                // Update stats
                track.plays++;
                const playsElement = playBtn.closest('.track-card').querySelector('.track-stats span:first-child');
                if (playsElement) {
                    playsElement.innerHTML = `<i class="fas fa-play"></i> ${track.plays.toLocaleString()}`;
                }
                
                // Update total tracks played stat
                appState.totalTracksGenerated++;
                totalTracksEl.textContent = `${(appState.totalTracksGenerated/1000).toFixed(0)}K+`;
                
                currentAudio = audio;
            } else {
                audio.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                currentAudio = null;
            }
        }

        function setTrackVolume(trackId, volume) {
            const audio = document.getElementById(`audio-${trackId}`);
            if (audio) {
                audio.volume = volume;
                currentVolume = volume;
            }
        }

        function likeTrack(trackId, track) {
            track.likes++;
            const likesElement = document.querySelector(`[data-track-id="${trackId}"]`).closest('.track-card').querySelector('.track-stats span:nth-child(2)');
            if (likesElement) {
                likesElement.innerHTML = `<i class="fas fa-heart"></i> ${track.likes}`;
            }
            showNotification("Track liked!", 2000);
        }

        // AI Track Generation
        function generateTrack() {
            const genre = document.getElementById('genre').value;
            const mood = document.getElementById('mood').value;
            const length = parseInt(document.getElementById('length').value);
            const complexity = parseInt(document.getElementById('complexity').value);
            const trackTitle = document.getElementById('trackTitle').value || generateTrackTitle(genre, mood);
            const inspiration = document.getElementById('inspiration').value;
            
            // Show loading state
            generateTrackBtn.innerHTML = '<div class="loader"></div> Generating...';
            generateTrackBtn.classList.remove('pulse');
            generateTrackBtn.disabled = true;
            
            // Generate track data
            setTimeout(() => {
                // Select random audio from the genre library
                const genreTracks = audioLibrary[genre] || audioLibrary.techno;
                const selectedAudio = genreTracks[Math.floor(Math.random() * genreTracks.length)];
                
                const newTrack = {
                    id: Date.now(),
                    title: trackTitle,
                    artist: appState.currentUser ? appState.currentUser.username : "anonymous",
                    genre: genre,
                    mood: mood,
                    length: length,
                    complexity: complexity,
                    plays: 0,
                    likes: 0,
                    icon: getIconForGenre(genre),
                    audioUrl: selectedAudio.url,
                    inspiration: inspiration,
                    createdAt: new Date().toISOString(),
                    listedOnMarketplace: false
                };
                
                // Add to user's tracks
                if (appState.isLoggedIn && appState.currentUser) {
                    appState.userTracks.push(newTrack);
                    
                    // Save to localStorage
                    const userTracks = JSON.parse(localStorage.getItem(`bmr_tracks_${appState.currentUser.id}`)) || [];
                    userTracks.push(newTrack);
                    localStorage.setItem(`bmr_tracks_${appState.currentUser.id}`, JSON.stringify(userTracks));
                    
                    // Update user stats
                    appState.currentUser.tracksGenerated++;
                }
                
                appState.totalTracksGenerated++;
                totalTracksEl.textContent = `${(appState.totalTracksGenerated/1000).toFixed(0)}K+`;
                
                // Display generated track
                displayGeneratedTrack(newTrack);
                
                // Reset button
                generateTrackBtn.innerHTML = '<i class="fas fa-bolt"></i> Generate Another Track';
                generateTrackBtn.classList.add('pulse');
                generateTrackBtn.disabled = false;
                
                // Show notification
                showNotification(`"${newTrack.title}" generated successfully!`, 4000);
                
                // Add to recent tracks grid (prepend)
                const trackCard = createTrackCard(newTrack);
                recentTracksGrid.prepend(trackCard);
                
                // Update dashboard if on that page
                if (document.getElementById('dashboard-page').classList.contains('active')) {
                    loadDashboard();
                }
                
            }, 2000 + Math.random() * 2000); // Simulate AI processing time
        }

        function generateTrackTitle(genre, mood) {
            const genreTitles = {
                techno: ["Neural", "Circuit", "Data", "Binary", "Quantum", "Digital", "Cyber", "Machine", "Pulse", "Signal"],
                dubstep: ["Fracture", "Breaker", "Collapse", "Rupture", "Fusion", "Void", "Echo", "Signal", "Bass", "Wobble"],
                dnb: ["Neuro", "Synapse", "Impulse", "Reflex", "Pulse", "Rhythm", "Flow", "Current", "Break", "Jungle"],
                wave: ["Atmosphere", "Drift", "Flow", "Current", "Vapor", "Mist", "Haze", "Ether", "Tide", "Surf"],
                experimental: ["Anomaly", "Aberration", "Deviation", "Variant", "Mutation", "Glitch", "Artifact", "Noise", "Algorithm", "Chaos"],
                industrial: ["Machine", "Factory", "Steel", "Metal", "Gear", "Piston", "Drill", "Forge", "Anvil", "Rivet"],
                glitch: ["Bit", "Byte", "Buffer", "Cache", "Code", "Error", "Bug", "Crash", "Fragment", "Pixel"]
            };
            
            const moodTitles = {
                dark: ["Shadow", "Night", "Void", "Abyss", "Gloom", "Omen", "Crypt", "Shade", "Dusk", "Midnight"],
                energetic: ["Surge", "Burst", "Spark", "Flash", "Rush", "Boost", "Charge", "Impulse", "Drive", "Power"],
                atmospheric: ["Drift", "Flow", "Mist", "Haze", "Echo", "Aura", "Vapor", "Ether", "Cloud", "Breeze"],
                chaotic: ["Chaos", "Frenzy", "Turmoil", "Havoc", "Mayhem", "Pandemonium", "Tumult", "Upheaval", "Anarchy", "Disorder"],
                melancholic: ["Sorrow", "Longing", "Memory", "Echo", "Ghost", "Phantom", "Remnant", "Trace", "Shadow", "Whisper"],
                hypnotic: ["Trance", "Loop", "Cycle", "Spiral", "Vortex", "Whirl", "Spin", "Twist", "Coil", "Helix"]
            };
            
            const genreWords = genreTitles[genre] || genreTitles.techno;
            const moodWords = moodTitles[mood] || moodTitles.dark;
            
            const genreWord = genreWords[Math.floor(Math.random() * genreWords.length)];
            const moodWord = moodWords[Math.floor(Math.random() * moodWords.length)];
            
            return `${genreWord} ${moodWord}`;
        }

        function getIconForGenre(genre) {
            const icons = {
                techno: "fa-sliders-h",
                dubstep: "fa-wave-square",
                dnb: "fa-bolt",
                wave: "fa-water",
                experimental: "fa-atom",
                industrial: "fa-industry",
                glitch: "fa-bug"
            };
            return icons[genre] || "fa-music";
        }

        function displayGeneratedTrack(track) {
            const outputPlaceholder = document.getElementById('outputPlaceholder');
            const trackOutput = document.getElementById('trackOutput');
            
            outputPlaceholder.style.display = 'none';
            trackOutput.style.display = 'block';
            trackOutput.innerHTML = `
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                    <div style="font-size: 3rem; color: var(--primary);">
                        <i class="fas ${track.icon}"></i>
                    </div>
                    <div>
                        <h3 style="color: var(--primary); margin-bottom: 5px;">${track.title}</h3>
                        <p>${track.genre.charAt(0).toUpperCase() + track.genre.slice(1)} | ${track.mood} | ${formatTime(track.length)}</p>
                        ${track.inspiration ? `<p style="margin-top: 10px; color: var(--text-dim); font-style: italic;">"${track.inspiration}"</p>` : ''}
                    </div>
                </div>
                
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Generation Parameters:</span>
                        <span>Complexity: ${track.complexity}/10</span>
                    </div>
                    <div style="height: 4px; background: linear-gradient(to right, var(--primary), var(--secondary)); width: ${track.complexity * 10}%; border-radius: 2px;"></div>
                </div>
                
                <div class="audio-player" style="display: block; margin-bottom: 20px;">
                    <div class="audio-controls">
                        <button class="play-btn" id="generatedTrackPlayBtn">
                            <i class="fas fa-play"></i>
                        </button>
                        <div class="progress-bar">
                            <div class="progress" id="generatedTrackProgress"></div>
                        </div>
                        <div class="time-display" id="generatedTrackTime">0:00 / ${formatTime(track.length)}</div>
                    </div>
                    <div class="volume-control">
                        <i class="fas fa-volume-down"></i>
                        <input type="range" min="0" max="100" value="70" id="generatedTrackVolume">
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-primary" id="playGeneratedTrack">
                        <i class="fas fa-play"></i> Play Preview
                    </button>
                    <button class="btn btn-secondary" id="downloadTrack">
                        <i class="fas fa-download"></i> Download STEMS
                    </button>
                    <button class="btn btn-secondary" id="listOnMarketplaceBtn">
                        <i class="fas fa-shopping-cart"></i> List on Marketplace
                    </button>
                </div>
            `;
            
            // Add event listeners for generated track
            const playBtn = document.getElementById('playGeneratedTrack');
            playBtn.addEventListener('click', function() {
                playGeneratedTrack(track);
            });
            
            const listBtn = document.getElementById('listOnMarketplaceBtn');
            listBtn.addEventListener('click', function() {
                listTrackOnMarketplace(track);
            });
            
            const downloadBtn = document.getElementById('downloadTrack');
            downloadBtn.addEventListener('click', function() {
                showNotification("Track stems downloading... This may take a moment.", 3000);
                // Simulate download
                setTimeout(() => {
                    showNotification("Download complete! Check your downloads folder.", 3000);
                }, 1500);
            });
            
            // Volume control for generated track
            const volumeSlider = document.getElementById('generatedTrackVolume');
            volumeSlider.addEventListener('input', function() {
                const volume = this.value / 100;
                if (window.generatedAudio) {
                    window.generatedAudio.volume = volume;
                    currentVolume = volume;
                }
            });
            
            // Scroll to output
            trackOutput.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function playGeneratedTrack(track) {
            const playBtn = document.getElementById('generatedTrackPlayBtn');
            const progressBar = document.getElementById('generatedTrackProgress');
            const timeDisplay = document.getElementById('generatedTrackTime');
            
            // Create audio element if it doesn't exist
            let audio = window.generatedAudio;
            if (!audio) {
                audio = new Audio(track.audioUrl);
                audio.volume = currentVolume;
                window.generatedAudio = audio;
                
                audio.addEventListener('timeupdate', function() {
                    const progress = (audio.currentTime / audio.duration) * 100;
                    progressBar.style.width = `${progress}%`;
                    timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(track.length)}`;
                });
                
                audio.addEventListener('ended', function() {
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    progressBar.style.width = '0%';
                    timeDisplay.textContent = `0:00 / ${formatTime(track.length)}`;
                });
            }
            
            if (audio.paused) {
                audio.play();
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                track.plays++;
            } else {
                audio.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        function listTrackOnMarketplace(track) {
            const price = (5 + Math.random() * 45).toFixed(2);
            const newMarketplaceItem = {
                id: Date.now(),
                title: track.title,
                description: `AI-generated ${track.genre} track created by @${track.artist}. ${track.mood} atmosphere with complexity level ${track.complexity}/10.`,
                price: parseFloat(price),
                type: "tracks",
                badge: "New",
                icon: track.icon,
                trackId: track.id
            };
            
            marketplaceItems.unshift(newMarketplaceItem);
            showNotification(`"${track.title}" listed on marketplace for ${price} ETH!`, 4000);
            
            // Mark track as listed
            track.listedOnMarketplace = true;
            
            // Update user stats if logged in
            if (appState.isLoggedIn && appState.currentUser) {
                appState.currentUser.tracksSold++;
                appState.currentUser.earnings += parseFloat(price);
            }
            
            // Switch to marketplace page
            switchPage('marketplace');
        }

        // Marketplace Functions
        function loadMarketplaceItems(filter = 'all') {
            marketplaceGrid.innerHTML = '';
            
            const filteredItems = filter === 'all' 
                ? marketplaceItems 
                : marketplaceItems.filter(item => item.type === filter);
            
            filteredItems.forEach(item => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">
                        <i class="fas ${item.icon}"></i>
                        ${item.badge ? `<div class="product-badge">${item.badge}</div>` : ''}
                    </div>
                    <div class="product-info">
                        <div class="product-title">${item.title}</div>
                        <div class="product-description">${item.description}</div>
                        <div class="product-footer">
                            <div class="product-price">${item.price.toFixed(2)} <span style="font-size: 0.8rem;">ETH</span></div>
                            <button class="btn btn-secondary buy-btn" data-item-id="${item.id}" style="padding: 8px 15px;">Buy</button>
                        </div>
                    </div>
                `;
                
                marketplaceGrid.appendChild(productCard);
            });
            
            // Add event listeners to buy buttons
            document.querySelectorAll('.buy-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const itemId = parseInt(this.getAttribute('data-item-id'));
                    buyMarketplaceItem(itemId);
                });
            });
        }

        function buyMarketplaceItem(itemId) {
            const item = marketplaceItems.find(i => i.id === itemId);
            if (item) {
                if (appState.isLoggedIn) {
                    showNotification(`Purchased "${item.title}" for ${item.price.toFixed(2)} ETH!`, 4000);
                    
                    // Update community stats
                    appState.communityStats.members += getRandomInt(1, 5);
                    updateCommunityStats();
                } else {
                    showNotification("Please sign in to make purchases", 3000);
                    authModal.style.display = 'flex';
                    showLoginForm();
                }
            }
        }

        // Community Functions
        function loadCommunityContent() {
            // Update stats
            updateCommunityStats();
            
            // Load forum posts
            forumPostsContainer.innerHTML = '';
            forumPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'forum-post';
                postElement.innerHTML = `
                    <div class="post-header">
                        <div class="user-avatar">${post.avatarText}</div>
                        <div class="post-info">
                            <h4>${post.title}</h4>
                            <div class="post-date">Posted by @${post.user} • ${post.date}</div>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>${post.content}</p>
                    </div>
                    <div class="post-stats">
                        <span><i class="fas fa-comment"></i> ${post.comments} comments</span>
                        <span><i class="fas fa-heart ${post.userLiked ? 'liked' : ''}" data-post-id="${post.id}"></i> <span id="likes-${post.id}">${post.likes}</span> likes</span>
                    </div>
                `;
                forumPostsContainer.appendChild(postElement);
            });
            
            // Add event listeners for like buttons
            document.querySelectorAll('.fa-heart').forEach(heart => {
                heart.addEventListener('click', function() {
                    const postId = parseInt(this.getAttribute('data-post-id'));
                    likePost(postId, this);
                });
            });
            
            // Load upcoming events
            upcomingEventsContainer.innerHTML = '';
            upcomingEvents.forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.className = 'event-item';
                eventElement.innerHTML = `
                    <div class="event-date">${event.date}</div>
                    <div class="event-title">${event.title}</div>
                    <div style="font-size: 0.9rem; color: var(--text-dim);">${event.description}</div>
                `;
                upcomingEventsContainer.appendChild(eventElement);
            });
            
            // Load top producers
            topProducersContainer.innerHTML = '';
            topProducers.forEach(producer => {
                const producerElement = document.createElement('div');
                producerElement.style.display = 'flex';
                producerElement.style.alignItems = 'center';
                producerElement.style.marginBottom = '15px';
                producerElement.innerHTML = `
                    <div class="user-avatar" style="width: 30px; height: 30px; margin-right: 10px;">${producer.avatarText}</div>
                    <div>
                        <div style="font-weight: 600;">${producer.name}</div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">${producer.sales} tracks sold</div>
                    </div>
                `;
                topProducersContainer.appendChild(producerElement);
            });
        }

        function updateCommunityStats() {
            communityMembersEl.textContent = appState.communityStats.members.toLocaleString();
            collabProjectsEl.textContent = appState.communityStats.projects.toLocaleString();
            liveSessionsEl.textContent = appState.communityStats.sessions.toLocaleString();
            trainingGroupsEl.textContent = appState.communityStats.groups;
        }

        function likePost(postId, heartElement) {
            const post = forumPosts.find(p => p.id === postId);
            if (post) {
                if (post.userLiked) {
                    post.likes--;
                    post.userLiked = false;
                    heartElement.classList.remove('liked');
                } else {
                    post.likes++;
                    post.userLiked = true;
                    heartElement.classList.add('liked');
                    showNotification("Liked post!", 2000);
                }
                
                const likesElement = document.getElementById(`likes-${postId}`);
                if (likesElement) {
                    likesElement.textContent = post.likes;
                }
            }
        }

        // Dashboard Functions
        function loadDashboard() {
            if (!appState.isLoggedIn) {
                userTracksList.innerHTML = '<p style="color: var(--text-dim); text-align: center;">Sign in to see your tracks</p>';
                userTracksCount.textContent = '0';
                userTracksSold.textContent = '0';
                userEarnings.textContent = '0 ETH';
                userLikes.textContent = '0';
                return;
            }
            
            // Update user stats
            userTracksCount.textContent = appState.userTracks.length;
            
            const tracksSold = appState.userTracks.filter(t => t.listedOnMarketplace).length;
            userTracksSold.textContent = tracksSold;
            
            const earnings = (tracksSold * 15.5).toFixed(2);
            userEarnings.textContent = `${earnings} ETH`;
            
            const totalLikes = appState.userTracks.reduce((sum, track) => sum + track.likes, 0);
            userLikes.textContent = totalLikes;
            
            // Display user tracks
            userTracksList.innerHTML = '';
            if (appState.userTracks.length === 0) {
                userTracksList.innerHTML = '<p style="color: var(--text-dim); text-align: center;">No tracks yet. Generate some music!</p>';
            } else {
                appState.userTracks.slice(0, 5).forEach(track => {
                    const trackElement = document.createElement('div');
                    trackElement.style.display = 'flex';
                    trackElement.style.justifyContent = 'space-between';
                    trackElement.style.alignItems = 'center';
                    trackElement.style.padding = '10px 0';
                    trackElement.style.borderBottom = '1px solid rgba(255, 255, 255, 0.05)';
                    trackElement.innerHTML = `
                        <div>
                            <div style="font-weight: 600;">${track.title}</div>
                            <div style="font-size: 0.8rem; color: var(--text-dim);">${track.genre} • ${formatTime(track.length)}</div>
                        </div>
                        <div>
                            <span style="margin-right: 15px;"><i class="fas fa-play"></i> ${track.plays}</span>
                            <span><i class="fas fa-heart"></i> ${track.likes}</span>
                        </div>
                    `;
                    userTracksList.appendChild(trackElement);
                });
                
                if (appState.userTracks.length > 5) {
                    const viewAll = document.createElement('a');
                    viewAll.href = '#';
                    viewAll.style.display = 'block';
                    viewAll.style.textAlign = 'center';
                    viewAll.style.marginTop = '15px';
                    viewAll.style.color = 'var(--primary)';
                    viewAll.textContent = `View all ${appState.userTracks.length} tracks →`;
                    viewAll.addEventListener('click', function(e) {
                        e.preventDefault();
                        switchPage('generator');
                    });
                    userTracksList.appendChild(viewAll);
                }
            }
            
            // Create chart
            const ctx = document.getElementById('userChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (window.userChartInstance) {
                window.userChartInstance.destroy();
            }
            
            // Generate sample data for the chart
            const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const trackData = labels.map(() => getRandomInt(1, 10));
            const likeData = labels.map(() => getRandomInt(5, 50));
            
            window.userChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Tracks Generated',
                            data: trackData,
                            borderColor: 'var(--primary)',
                            backgroundColor: 'rgba(0, 255, 255, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Likes Received',
                            data: likeData,
                            borderColor: 'var(--secondary)',
                            backgroundColor: 'rgba(255, 0, 255, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'var(--text)'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text)'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text)'
                            }
                        }
                    }
                }
            });
        }

        // Load Preset Function
        function loadPreset() {
            const presets = [
                { genre: 'techno', mood: 'dark', length: 180, complexity: 8, title: 'Dark Techno Experiment' },
                { genre: 'dubstep', mood: 'energetic', length: 240, complexity: 9, title: 'Bass Heavy Drop' },
                { genre: 'wave', mood: 'atmospheric', length: 300, complexity: 6, title: 'Atmospheric Drift' },
                { genre: 'experimental', mood: 'chaotic', length: 150, complexity: 10, title: 'Glitch Chaos' },
                { genre: 'industrial', mood: 'dark', length: 210, complexity: 7, title: 'Factory Echoes' },
                { genre: 'glitch', mood: 'chaotic', length: 165, complexity: 9, title: 'Digital Fracture' }
            ];
            
            const preset = presets[Math.floor(Math.random() * presets.length)];
            
            document.getElementById('genre').value = preset.genre;
            document.getElementById('mood').value = preset.mood;
            document.getElementById('length').value = preset.length;
            document.getElementById('complexity').value = preset.complexity;
            document.getElementById('trackTitle').value = preset.title;
            
            // Update UI elements
            document.getElementById('lengthValue').textContent = formatTime(preset.length);
            document.getElementById('complexityValue').textContent = `${preset.complexity}/10`;
            
            showNotification(`Loaded "${preset.title}" preset`, 3000);
        }

        // Initialize Application
        function initApp() {
            // Set initial stats
            totalTracksEl.textContent = `${(appState.totalTracksGenerated/1000).toFixed(0)}K+`;
            activeProducersEl.textContent = `${(appState.activeProducers/1000).toFixed(0)}K+`;
            aiModelsEl.textContent = `${appState.aiModels}+`;
            
            // Check if user is already logged in from localStorage
            const currentUser = JSON.parse(localStorage.getItem('bmr_currentUser'));
            if (currentUser) {
                appState.currentUser = currentUser;
                appState.isLoggedIn = true;
                
                // Load user tracks
                const userTracks = JSON.parse(localStorage.getItem(`bmr_tracks_${currentUser.id}`)) || [];
                appState.userTracks = userTracks;
                
                updateUserUI();
            }
            
            // Load initial content
            loadRecentTracks();
            loadMarketplaceItems();
            loadCommunityContent();
            
            // Event Listeners
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    switchPage(pageId);
                });
            });
            
            document.querySelector('.logo').addEventListener('click', function(e) {
                e.preventDefault();
                switchPage('home');
            });
            
            document.querySelector('.auth-buttons .btn-primary').addEventListener('click', function(e) {
                e.preventDefault();
                switchPage('generator');
            });
            
            // Mobile menu
            menuToggle.addEventListener('click', () => {
                mainNav.classList.toggle('active');
            });
            
            document.addEventListener('click', (e) => {
                if (!mainNav.contains(e.target) && !menuToggle.contains(e.target)) {
                    mainNav.classList.remove('active');
                }
            });
            
            // Auth Modal
            loginBtn.addEventListener('click', () => {
                authModal.style.display = 'flex';
                showLoginForm();
            });
            
            closeAuthModal.addEventListener('click', () => {
                authModal.style.display = 'none';
            });
            
            // Switch between login and register forms
            switchToRegister.addEventListener('click', (e) => {
                e.preventDefault();
                showRegisterForm();
            });
            
            switchToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                showLoginForm();
            });
            
            formTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const formType = this.getAttribute('data-form');
                    if (formType === 'login') {
                        showLoginForm();
                    } else {
                        showRegisterForm();
                    }
                });
            });
            
            // Login form submission
            submitLogin.addEventListener('click', () => {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // Reset errors
                hideError('loginEmailError');
                hideError('loginPasswordError');
                
                // Validation
                let isValid = true;
                
                if (!email) {
                    showError('loginEmailError', 'Email is required');
                    isValid = false;
                } else if (!validateEmail(email)) {
                    showError('loginEmailError', 'Please enter a valid email');
                    isValid = false;
                }
                
                if (!password) {
                    showError('loginPasswordError', 'Password is required');
                    isValid = false;
                }
                
                if (isValid) {
                    if (loginUser(email, password)) {
                        // Save current user to localStorage
                        localStorage.setItem('bmr_currentUser', JSON.stringify(appState.currentUser));
                    }
                }
            });
            
            // Register form submission
            submitRegister.addEventListener('click', () => {
                const username = document.getElementById('registerUsername').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                const producerType = document.getElementById('producerType').value;
                
                // Reset errors
                hideError('registerUsernameError');
                hideError('registerEmailError');
                hideError('registerPasswordError');
                hideError('registerConfirmPasswordError');
                
                // Validation
                let isValid = true;
                
                if (!username) {
                    showError('registerUsernameError', 'Username is required');
                    isValid = false;
                } else if (username.length < 3) {
                    showError('registerUsernameError', 'Username must be at least 3 characters');
                    isValid = false;
                }
                
                if (!email) {
                    showError('registerEmailError', 'Email is required');
                    isValid = false;
                } else if (!validateEmail(email)) {
                    showError('registerEmailError', 'Please enter a valid email');
                    isValid = false;
                }
                
                if (!password) {
                    showError('registerPasswordError', 'Password is required');
                    isValid = false;
                } else if (password.length < 8) {
                    showError('registerPasswordError', 'Password must be at least 8 characters');
                    isValid = false;
                }
                
                if (!confirmPassword) {
                    showError('registerConfirmPasswordError', 'Please confirm your password');
                    isValid = false;
                } else if (password !== confirmPassword) {
                    showError('registerConfirmPasswordError', 'Passwords do not match');
                    isValid = false;
                }
                
                if (isValid) {
                    if (registerUser(username, email, password, producerType)) {
                        // Save current user to localStorage
                        localStorage.setItem('bmr_currentUser', JSON.stringify(appState.currentUser));
                    }
                }
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === authModal) {
                    authModal.style.display = 'none';
                }
            });
            
            // User profile dropdown
            userProfile.addEventListener('click', (e) => {
                e.stopPropagation();
                profileDropdown.classList.toggle('show');
            });
            
            // Profile dropdown items
            document.getElementById('viewProfileBtn').addEventListener('click', () => {
                showNotification("Profile page coming soon!", 3000);
                profileDropdown.classList.remove('show');
            });
            
            document.getElementById('myTracksBtn').addEventListener('click', () => {
                switchPage('dashboard');
                profileDropdown.classList.remove('show');
            });
            
            document.getElementById('settingsBtn').addEventListener('click', () => {
                showNotification("Settings page coming soon!", 3000);
                profileDropdown.classList.remove('show');
            });
            
            document.getElementById('logoutBtn').addEventListener('click', () => {
                logoutUser();
                // Remove current user from localStorage
                localStorage.removeItem('bmr_currentUser');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', () => {
                profileDropdown.classList.remove('show');
            });
            
            // Generator controls
            const lengthSlider = document.getElementById('length');
            const lengthValue = document.getElementById('lengthValue');
            const complexitySlider = document.getElementById('complexity');
            const complexityValue = document.getElementById('complexityValue');
            
            lengthSlider.addEventListener('input', () => {
                lengthValue.textContent = formatTime(lengthSlider.value);
            });
            
            complexitySlider.addEventListener('input', () => {
                complexityValue.textContent = `${complexitySlider.value}/10`;
            });
            
            // Generate track button
            generateTrackBtn.addEventListener('click', generateTrack);
            
            // Load preset button
            loadPresetBtn.addEventListener('click', loadPreset);
            
            // Create and sell button
            createAndSellBtn.addEventListener('click', function(e) {
                e.preventDefault();
                showNotification("Redirecting to track generator...", 2000);
                setTimeout(() => {
                    switchPage('generator');
                }, 500);
            });
            
            // Submit post button
            submitPostBtn.addEventListener('click', function() {
                const content = document.getElementById('newPostContent').value;
                if (content.trim()) {
                    const username = appState.currentUser ? appState.currentUser.username : "anonymous";
                    const avatarText = appState.currentUser ? appState.currentUser.avatarText : "AN";
                    
                    const newPost = {
                        id: forumPosts.length + 1,
                        user: username,
                        avatarText: avatarText,
                        title: "New Community Post",
                        content: content,
                        date: "Just now",
                        comments: 0,
                        likes: 0,
                        userLiked: false
                    };
                    
                    forumPosts.unshift(newPost);
                    loadCommunityContent();
                    document.getElementById('newPostContent').value = '';
                    showNotification("Post published to community!", 3000);
                    
                    // Update community stats
                    appState.communityStats.members += getRandomInt(1, 3);
                    updateCommunityStats();
                } else {
                    showNotification("Please write something before posting", 3000);
                }
            });
            
            // Marketplace filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const filter = this.getAttribute('data-filter');
                    loadMarketplaceItems(filter);
                });
            });
            
            // Initialize range values
            lengthValue.textContent = formatTime(lengthSlider.value);
            complexityValue.textContent = `${complexitySlider.value}/10`;
            
            // Start with home page
            switchPage('home');
            
            // Simulate some initial activity
            setTimeout(() => {
                appState.totalTracksGenerated += getRandomInt(100, 500);
                appState.activeProducers += getRandomInt(10, 50);
                totalTracksEl.textContent = `${(appState.totalTracksGenerated/1000).toFixed(0)}K+`;
                activeProducersEl.textContent = `${(appState.activeProducers/1000).toFixed(0)}K+`;
                
                // Simulate community growth
                setInterval(() => {
                    appState.communityStats.members += getRandomInt(1, 5);
                    appState.communityStats.sessions += getRandomInt(1, 3);
                    updateCommunityStats();
                }, 30000); // Every 30 seconds
            }, 2000);
        }

        // Start the application
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
